{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\IT\\\\Documents\\\\GitHub\\\\coll2030\\\\src\\\\ProductImageList.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport Grid from '@mui/material/Grid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductImageList() {\n  _s();\n\n  const [state, setData] = useState({\n    products: []\n  });\n  const [bottomReached, setBottom] = useState(false);\n  useEffect(() => {\n    fetchData(0);\n  }, []);\n  useEffect(() => {\n    document.addEventListener('scroll', handleDocScroll);\n    return () => document.removeEventListener('scroll', handleDocScroll);\n  }, []);\n\n  async function handleDocScroll(e) {\n    if (window.innerHeight + window.scrollY >= document.body.scrollHeight && !bottomReached) {\n      // you're at the bottom of the page\n      console.log('');\n      debugger;\n      setBottom(true);\n      let prevPage = parseInt(localStorage.getItem('page'));\n      let nextPage = ++prevPage;\n      localStorage.setItem('page', nextPage); // await fetchData(nextPage + 100)\n\n      setBottom(false);\n    }\n  }\n\n  async function fetchData(page) {\n    const gender = localStorage.getItem('gender');\n    const subcategory = localStorage.getItem('subcategory');\n    const category = localStorage.getItem('category');\n    const url = `/.netlify/functions/atlas?gender=${gender}&category=${category}&subcategory=pantolon&page=${page}`;\n    const response = await fetch(url, {\n      cache: 'default'\n    });\n    const {\n      data\n    } = await response.json();\n    debugger;\n    setData({\n      products: data\n    });\n    console.log(data);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    justifyContent: \"center\",\n    spacing: 1,\n    children: state.products.map((item, i) => {\n      return /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(ImageComponent, {\n          plcHolder: item.plcHolder,\n          imageUrl: item.imageUrl,\n          title: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 16\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProductImageList, \"+sSKJ8SMCD5/rXjfsuwFv0ZkaLM=\");\n\n_c = ProductImageList;\n\nfunction ImageComponent(props) {\n  _s2();\n\n  const imageEl = useRef(null);\n  useEffect(() => {\n    if (window.IntersectionObserver) {\n      let observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            //  console.log(entry);\n            entry.target.src = entry.target.dataset.src;\n            observer.unobserve(entry.target);\n          }\n        });\n      }, {\n        threshold: 0.1\n      });\n      window.obz = observer;\n      window.obz.observe(imageEl.current);\n    }\n  }, [props]);\n  return /*#__PURE__*/_jsxDEV(\"img\", {\n    ref: imageEl,\n    src: props.plcHolder,\n    \"data-src\": 'https://res.cloudinary.com/codergihub/image/fetch/w_250/' + props.imageUrl,\n    alt: props.title,\n    loading: \"lazy\",\n    width: \"250\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(ImageComponent, \"5ZOT5nfFeGHZZIfSn52hZV7XqdA=\");\n\n_c2 = ImageComponent;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductImageList\");\n$RefreshReg$(_c2, \"ImageComponent\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Grid","ProductImageList","state","setData","products","bottomReached","setBottom","fetchData","document","addEventListener","handleDocScroll","removeEventListener","e","window","innerHeight","scrollY","body","scrollHeight","console","log","prevPage","parseInt","localStorage","getItem","nextPage","setItem","page","gender","subcategory","category","url","response","fetch","cache","data","json","map","item","i","plcHolder","imageUrl","title","ImageComponent","props","imageEl","IntersectionObserver","observer","entries","forEach","entry","isIntersecting","target","src","dataset","unobserve","threshold","obz","observe","current"],"sources":["C:/Users/IT/Documents/GitHub/coll2030/src/ProductImageList.js"],"sourcesContent":["\r\n\r\n\r\n\r\nimport React, { useEffect, useState, useRef } from 'react';\r\n\r\nimport Grid from '@mui/material/Grid'\r\nexport default function ProductImageList() {\r\n  const [state, setData] = useState({ products: [] });\r\n  const [bottomReached,setBottom]=useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    fetchData(0)\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n\r\n    document.addEventListener('scroll', handleDocScroll)\r\n\r\n    return () => document.removeEventListener('scroll', handleDocScroll)\r\n\r\n  }, []);\r\n\r\n  async function handleDocScroll(e) {\r\n  \r\n\r\n    if ((window.innerHeight + window.scrollY) >= document.body.scrollHeight && !bottomReached) {\r\n      // you're at the bottom of the page\r\n      console.log('')\r\n      debugger;\r\n      setBottom(true)\r\n      let prevPage = parseInt(localStorage.getItem('page'))\r\n      let nextPage = ++prevPage\r\n      localStorage.setItem('page', nextPage)\r\n     // await fetchData(nextPage + 100)\r\n      setBottom(false)\r\n  }\r\n \r\n\r\n  }\r\n\r\n  async function fetchData(page) {\r\n    const gender = localStorage.getItem('gender')\r\n    const subcategory = localStorage.getItem('subcategory')\r\n    const category = localStorage.getItem('category')\r\n    const url = `/.netlify/functions/atlas?gender=${gender}&category=${category}&subcategory=pantolon&page=${page}`\r\n\r\n    const response = await fetch(url, { cache: 'default' })\r\n\r\n    const { data } = await response.json()\r\ndebugger;\r\n    setData({ products: data })\r\n    console.log(data)\r\n\r\n  }\r\n\r\n\r\n  return (\r\n\r\n    <Grid container justifyContent=\"center\" spacing={1}\r\n    >\r\n      {state.products.map((item, i) => {\r\n\r\n        return <Grid item key={i} >\r\n          <ImageComponent plcHolder={item.plcHolder} imageUrl={item.imageUrl} title={item.title} />\r\n        </Grid>\r\n      })}\r\n    </Grid>\r\n\r\n\r\n  );\r\n}\r\n\r\n\r\nfunction ImageComponent(props) {\r\n  const imageEl = useRef(null);\r\n  useEffect(() => {\r\n\r\n    if (window.IntersectionObserver) {\r\n\r\n      let observer = new IntersectionObserver((entries, observer) => {\r\n        entries.forEach(entry => {\r\n          if (entry.isIntersecting) {\r\n            //  console.log(entry);\r\n            entry.target.src = entry.target.dataset.src;\r\n            observer.unobserve(entry.target);\r\n          }\r\n        });\r\n      }, { threshold: 0.1 });\r\n      window.obz = observer\r\n      window.obz.observe(imageEl.current)\r\n\r\n    }\r\n\r\n\r\n  }, [props]);\r\n  return (\r\n    <img ref={imageEl}\r\n      src={props.plcHolder}\r\n      data-src={'https://res.cloudinary.com/codergihub/image/fetch/w_250/' + props.imageUrl}\r\n      alt={props.title}\r\n      loading=\"lazy\"\r\n      width=\"250\"\r\n    />\r\n  )\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}